<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- List View -->
    <record id="view_relieve_form_tree" model="ir.ui.view">
        <field name="name">relieve.form.tree</field>
        <field name="model">relieve.form</field>
        <field name="arch" type="xml">
            <list string="Relieve Form">
                <field name="employee_id"/>
                <field name="department_id"/>
                <field name="head_dept_id"/>
                <field name="state" widget="badge"/>
            </list>
        </field>
    </record>

    <!-- Form View -->
    <record id="view_relieve_form_form" model="ir.ui.view">
        <field name="name">relieve form </field>
        <field name="model">relieve.form</field>
        <field name="arch" type="xml">
            <form string="Relieve Form">
                <sheet>
                    <header>
                        <button name="relieve_request" string="Request" type="object"
                                 class="btn-primary"
                                invisible="state not in ('cancel', False)"
                        />


                        <button name="head_approved" string="Head Approve" type="object"
                                 class="btn-primary"
                                groups="atees_experience_certificate.access_dept_head"
                                invisible="state != 'draft'"
                        />
                        <button name="reject_request_head" string="Reject" type="object"
                                class="btn-danger"
                                groups="atees_experience_certificate.access_dept_head"
                                invisible="state != 'draft'"
                        />


                        <button name="admin_approved" string="Admin Approve" type="object"
                                 class="btn-primary"
                                groups="atees_experience_certificate.access_admin_head"
                                invisible="state != 'department'"
                        />
                        <button name="reject_request_admin" string="Reject" type="object"
                                class="btn-danger"
                                groups="atees_experience_certificate.access_admin_head"
                                invisible="state != 'department'"
                        />


                        <button name="hr_approved" string="Hr Approve" type="object"
                                 class="btn-primary"
                                groups="atees_experience_certificate.access_hr_head"
                                invisible="state != 'admin'"
                        />
                        <button name="reject_request_hr" string="Reject" type="object"
                                class="btn-danger"
                                groups="atees_experience_certificate.access_hr_head"
                                invisible="state != 'admin'"
                        />



                        <field name="state" widget="statusbar"/>
                    </header>
                    <group string="Relieve Form">
                        <group>
                            <field name="department_id"/>
                            <field name="employee_id"/>
                            <field name="join_date"/>
                            <field name="terminate_date"/>
                        </group>
                        <group>
                            <field name="job_id"/>
                            <field name="head_dept_id"/>
                        </group>

                    </group>
                    <notebook>
                        <page groups="atees_experience_certificate.access_admin_head" string="Return Of Property">
                            <group>
                                <group>
                            <field name="id_card"/>
                            <field name="laptop"/>
                            <field name="mobile"/>
                            <field name="sim"/>
                            <field name="connectors"/>
                            <field name="devices"/>
                            <field name="credentials"/>
                            <field name="credentials_of_office"/>
                            <field name="credentials_of_client"/>
                              </group>
                                <group>
                            <field name="flock"/>
                            <field name="gmail"/>
                            <field name="erp"/>
                            <field name="social_media"/>
                            <field name="server"/>
                            <field name="others"/>
                            <field name="headset"/>
                            <field name="tab"/>
                                    </group>
                            </group>

                        </page>
                    </notebook>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>


    <!-- Action -->
    <record id="action_relieve_form" model="ir.actions.act_window">
        <field name="name">Relieve Form</field>
        <field name="res_model">relieve.form</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('employee_id.user_id', '=', uid)]</field>
    </record>

    <!-- Menu -->

    <menuitem id="menu_relieve_form_root"
              name="Relieve Form"
              parent="hr.menu_hr_root"
              sequence="10"/>

    <menuitem id="menu_relieve_form"
              name="Relieve Form"
              parent="menu_relieve_form_root"
              action="action_relieve_form"
              sequence="10"/>

    <record id="action_relieve_form_access" model="ir.actions.act_window">
        <field name="name">All Relieving Forms</field>
        <field name="res_model">relieve.form</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('state','in', ('draft', 'department', 'admin', 'hr', 'cancel'))]</field>

    </record>

    <menuitem id="menu_relieve_form_hr"
              name="All Relieving Forms"
              parent="menu_relieve_form_root"
              action="action_relieve_form_access"
              groups="atees_experience_certificate.group_relieve_authorized"
              />
</odoo>
